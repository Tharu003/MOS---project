<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MOS - Card Carousel with Modal</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: #fafafa;
      font-family: "Segoe UI", sans-serif;
    }
    h2 {
      font-weight: 600;
      color: #5a3e9d;
    }

    /* Carousel */
    .carousel-container {
      position: relative;
      overflow: hidden;
      margin: 40px auto;
    }
    .carousel-track {
      display: flex;
      transition: transform 0.6s ease-in-out;
    }
    .event-card {
      flex: 0 0 calc(100% / 3);
      max-width: calc(100% / 3);
      padding: 20px;
    }
    .event-card .card {
      border: none;
      border-radius: 18px;
      background: #fff;
      padding: 15px;
      box-shadow: 0 6px 16px rgba(90, 62, 157, 0.15);
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .event-card img {
      border-radius: 12px;
    }
    .event-card .card-title {
      margin-top: 12px;
      font-size: 1rem;
      font-weight: 600;
      color: #333;
    }
    .event-card .card-text {
      font-size: 0.9rem;
      color: #666;
    }
    .event-card .btn {
      margin-top: 10px;
      border-radius: 10px;
      background: #6a4fc9;
      border: none;
    }
    .event-card .btn:hover {
      background: #5a3e9d;
    }

    /* Buttons */
    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: #fff;
      border: 2px solid #e5dbff;
      color: #5a3e9d;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 10;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }
    .carousel-btn:hover {
      background: #f4f0ff;
    }
    .carousel-btn.prev { left: 2px; }
    .carousel-btn.next { right: 12px; }

    /* Modal */
    .modal-content {
      border-radius: 16px;
      padding: 0px;
    }
    .modal-title {
      color: #5a3e9d;
      font-weight: 600;
    }
    #eventModalDesc {
      font-size: 1rem;
      line-height: 1.6;
      color: #444;
    }
    /* Responsive number of visible cards */
  .event-card {
    flex: 0 0 calc(100% / 3);
    max-width: calc(100% / 3);
    padding: 20px;
  }

  @media (max-width: 992px) {
    .event-card {
      flex: 0 0 calc(100% / 2);
      max-width: calc(100% / 2);
    }
  }

  @media (max-width: 576px) {
    .event-card {
      flex: 0 0 100%;
      max-width: 100%;
    }
  }
  .card-img-top{
    max-height: 230px;
    display: flex;
  }
  </style>
</head>
<body>

<div class="container">
  <h2 class="mb-3">Upcoming Events</h2>
  <p class="text-muted mb-4">Check out our latest events and workshops</p>

  <div class="carousel-container" id="cardCarousel">
    <div class="carousel-track" id="events-track">


        <!-- Add more cards -->
        <div class="event-card">
          <div class="card">
            <img src="assets/img/event/event1.0.jpg" class="card-img-top" alt="Event 1">
            <div class="card-body">
              <h6 class="card-title">“ක්‍රීඩා වෛද්‍ය විද්‍යා පුහුණු වැඩසටහන — දකුණු පළාතේ සාර්ථක නිමාව”</h6>
              <p class="card-text">─ ලාල් ඒ්කනායක මහතාගේ සහභාගීත්වයෙන් අතිවිශේෂ අවස්ථාව</p>
              <button class="btn btn-primary view-btn"
                data-title="“ක්‍රීඩා වෛද්‍ය විද්‍යා පුහුණු වැඩසටහන — දකුණු පළාතේ සාර්ථක නිමාව”"
                data-full="දකුණු පළාත් ක්‍රීඩා සංවර්ධන හා පුහුණු ආයතනය විසින් සංවිධානය කරනු  ලබන පුහුණු වැඩසටහන් මාලාවට  සමඟාමීව පවත්වනු ලැබු  ක්‍රීඩා ‌‌වෛද්‍ය විද්‍යාව (Sports Medicine) පුහුණු වැඩසටහන 2025/08/07 වන දින සාර්ථකව නිමාවට පත්විය .මෙම වැඩසටහන සඳහා ක්‍රීඩා පුහුණුකරුවන් හා පාසල් ක්‍රීඩා පුහුණුකරුවන් ඇතුළු ක්‍රීඩා ක්ෂේත්‍රයේ නිරත වන පිරිස් එක් විය. 
          මෙම අවස්ථාව සඳහා 
          දකුණු පළාත් ක්‍රීඩා දෙපාර්තමේන්තුවේ ක්‍රීඩා අධ්‍යක්ෂ නීතිඥ රොෂාන් අමරසිංහ මහතා එම දෙපාර්තමේන්තුවේ සහකාර ක්‍රීඩා අධ්‍යක්‍ෂ තාක්ෂණ ඩේලියාද සිල්වා
          මහත්මිය දිස්ත්‍රික් ක්‍රීඩා නිලධාරී
          ඒ.බී.අශෝකා මෙනවිය ඇතුළු ක්‍රීඩා සංවර්ධ පුහුණු ආයතනයේ නිලධාරීන් එක්විය.
          මෙම වැඩසටහනේ සම්පත් දායකත්වය ලබා දුන් ‌වෛද්‍ය ලාල් ඒ්කනායක මහතා, අධ්‍යක්ෂ ජනරාල්, ක්‍රීඩා වෛද්‍ය  ආයතනය
          ආවර්ජනා ද සිල්වා මෙනවිය ,භෞත චිකිත්සක, ක්‍රීඩා වෛද්‍ය  ආයතනය ඇතුළු සහභාගි වු පුහුණුලාභින්ට හා
          වැඩසටහන සංවිධානය කළ නිලධාරින්ට සහ සහයෝගය දුන ඔබ සැමට ප්‍රණාමය !!
          #දිනන #දකුණ"
                data-img="assets/img/event/event1.0.jpg"
                data-row-images='[
                  "assets/img/event/event1.1.jpg",
                  "assets/img/event/event1.2.jpg",
                  "assets/img/event/event1.3.jpg",
                  "assets/img/event/event1.4.jpg",            
                  "assets/img/event/event1.6.jpg"
                ]'>
                View
              </button>
            </div>
          </div>
        </div>
        
        <div class="event-card">
          <div class="card">
            <img src="assets/img/event/event 2.0.jpg" class="card-img-top" alt="Event 2">
            <div class="card-body">
              <h6 class="card-title">ජාතික මලල ක්‍රීඩා ශූරතාවලියේ කාන්තා ශූරිය</h6>
              <p class="card-text">නදීෂා රාමනායක, 103වැනි ජාතික මලල ක්‍රීඩා ශූරතාවලියේ දක්ෂතම කාන්තා ක්‍රීඩිකා ලෙස සම්මානයට</p>
              <button class="btn btn-primary view-btn"
                data-title="“ජාතික මලල ක්‍රීඩා ශූරතාවලියේ කාන්තා ශූරිය”"
                data-full="103 වැනි ජාතික මලල ක්‍රීඩා ශූරතාවලියේ #දක්ෂතම කාන්තා ක්‍රීඩිකාව ලෙස #දකුණු #පළාත නියෝජනය කරන  #නදීෂා #රාමනායක ක්‍රීඩීකාව සම්මානයට පාත්‍ර වූවාය.  ඇය මීටර් 400 ඉසව්ව තත්පර 52.86කින් නිම කරමින් කීර්තිමත් කොළඹ ආපනශාලා කමිටු අභියෝගතා කුසලානය දිනාගනු ලැබීය . 
#දිනන #දකුණ❤"
                data-img="assets/img/event/event 2.0.jpg"
                data-row-images='[
                  
                ]'>
                View
              </button>
            </div>
          </div>
        </div>

        <div class="event-card">
          <div class="card">
            <img src="assets/img/event/event3.0.jpg" class="card-img-top" alt="Event 3">
            <div class="card-body">
              <h6 class="card-title">දකුණු පළාත් රාජ්‍ය සේවා ක්‍රීඩා උළෙල 2025</h6>
              <p class="card-text">දකුණු පළාත් රාජ්‍ය සේවා ක්‍රීඩා උළෙල : සාකච්ඡාව ප්‍රධාන ලේකම් කාර්යාලයේදී පැවැත්වෙයි</p>
              <button class="btn btn-primary view-btn"
                data-title="“දකුණු පළාත් රාජ්‍ය සේවා ක්‍රීඩා උළෙල 2025”"
                data-full="දකුණු පළාත් ක්‍රීඩා දෙපර්තමේන්තුව විසින් 2025 වර්ෂය සඳහා පැවැත්වීමට යෝජිත රාජ්‍ය සේවා ක්‍රිඩා උළෙල  මෙවරත් සැප්තැම්බර් මාසය වන විට ආරම්භ කිරීමට නියමිතව ඇති අතර එහි මූලික සාකච්ඡාව 2025.07.24 දින ප්‍රධාන ලේකම් කාර්යාලයේදී පැවැත්වුණි .
මෙහිදී දකුණු පළාත් රාජ්‍ය සේවා ක්‍රිඩා උළෙල මෙවර  දකුණු පළාතේ විසිරි සිටින රාජ්‍ය සේවකයන් වැඩි ප්‍රමාණයකගේ සහභාගිත්වයෙන් පැවැත්වීමට අදාළ යෝජනා හා ගැටලු සාකච්ඡාවට බඳුන් විය 
මෙම සාකච්ඡාව දකුණු පළාත් ප්‍රධාන ලේකම් නීතිඥ සුමිත් අලහකෝන් මහතාගේ ප්‍රධානත්වයෙන් පැවැති අතර ඒ සඳහා ක්‍රීඩා අමාත්‍යාංශයේ ලේ්කම්තුමා ප්‍රමුඛ අමාත්‍යාංශය ලේකම් තුමන්ලා, ප්‍රදේශීය ලේකම් තුමන්ලා හා දෙපර්තමේන්තු ප්‍රධානීන් එක්විය."
                data-img="assets/img/event/event3.jpg"
                data-row-images='[
                  "assets/img/event/event3.1.jpg",
                  "assets/img/event/event3.2.jpg",
                  "assets/img/event/event3.3.jpg"
                ]'>
                View
              </button>
            </div>
          </div>
        </div>

        <div class="event-card">
          <div class="card">
            <img src="assets/img/event/event4.2.jpg" class="card-img-top" alt="Event 3">
            <div class="card-body">
              <h6 class="card-title">දකුණු පළාත් අභිමානය: රනිත්මා ලියනගේ</h6>
              <p class="card-text">රනිත්මා ලියනගේ, සමස්ත එංගලන්ත කනිෂ්ඨ බැඩ්මින්ටන් ශූරතාවලියේ රන් පදක්කම දිනා ගනී</p>
              <button class="btn btn-primary view-btn"
                data-title="“දකුණු පළාත් අභිමානය: රනිත්මා ලියනගේ”"
                data-full="#A #source #of #pride #for #the #Southern #Province
සමස්ත #එංගලන්ත කනිෂ්ඨ බැඩ්මින්ටන් ශූරතාවලියේ වයස අවුරුදු 19 න් පහළ බාලිකා #ඒකල #ශූරතාවය දිනා ගනිමින් #රන් #පදක්කම හිමිකර ගත් ශ්‍රී ලාංකික ක්‍රීඩිකා රනිත්මා ලියනගේ ඊයේ දිවයිනට පැමිණියා.
මෙම තරගාවලිය ලොව රටවල් 13 ක ක්‍රීඩිකාවන් 57 දෙනෙකුගේ සහභාගීත්වයෙන් පසුගිය 31 වනදා සිට පෙරේදා දක්වා එංගලන්තයේ බර්මින්හැම් හීදි පැවැත්වුණා.
එහිදී එංගලන්ත ක්‍රීඩිකාව තරග වට 2 ට 0 ක් ලෙස පරාජයට පත් කරමින් රනිත්මා මෙම ජයග්‍රහණය හිමි කරගෙන තිබෙනවා.
#රනිත්මා #ලියනගේ මෙරට ජාතික බැඩ්මින්ටන් ශූරිය වන අතර ඇය ගාල්ල, බද්දේගම ක්‍රිස්තුදේව බාලිකා විද්‍යාලයේ ඉගෙනුම ලබන ශිෂ්‍යයාවක්
#දිනන #දකුණ"
                data-img="assets/img/event/event4.1.jpg"
                data-row-images='[
                  "assets/img/event/event4.2.jpg",
                  "assets/img/event/event4.0.jpg"
                ]'>
                View
              </button>
            </div>
          </div>
        </div>

        <!-- ... more cards as needed -->

    </div>

    <!-- Controls -->
    <button class="carousel-btn prev">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
      </svg>
    </button>

    <button class="carousel-btn next">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M4.646 14.354a.5.5 0 0 1 0-.708L10.293 8 4.646 2.354a.5.5 0 1 1 .708-.708l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708 0z"/>
      </svg>
    </button>

  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="eventModal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="eventModalLabel">Event Title</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3 text-center">
          <img id="eventModalImage" src="" alt="Event Image" class="img-fluid rounded" style="max-height:250px;">
        </div>
        <p id="eventModalDesc"></p>
        <div class="row mt-3" id="eventModalRowImages"></div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
const carousel = document.querySelector('#cardCarousel');
const track = carousel.querySelector('.carousel-track');
const cards = Array.from(track.querySelectorAll('.event-card')); // ✅ keep originals
const prevBtn = carousel.querySelector('.prev');
const nextBtn = carousel.querySelector('.next');

let index = 0;
let perView = 3;
let cardWidth = cards[0].offsetWidth;

function updateSizes() {
  perView = cardsPerView();
  cardWidth = cards[0].offsetWidth;
  updateCarousel(false);
}

function cardsPerView() {
  if (window.innerWidth < 576) return 1;
  if (window.innerWidth < 992) return 2;
  return 3;
}

// Setup clones (add extra copies at the end for smooth looping)
function setupClones() {
  // remove old clones first
  track.querySelectorAll('.clone').forEach(el => el.remove());

  for (let i = 0; i < perView; i++) {
    const clone = cards[i].cloneNode(true);
    clone.classList.add('clone');
    track.appendChild(clone);
  }
}

function updateCarousel(smooth = true) {
  track.style.transition = smooth ? 'transform 0.6s ease' : 'none';
  track.style.transform = `translateX(-${index * cardWidth}px)`;
}

nextBtn.addEventListener('click', () => {
  index++;
  updateCarousel();

  if (index > cards.length) {
    setTimeout(() => {
      index = 1;
      updateCarousel(false);
    }, 600);
  }
});

prevBtn.addEventListener('click', () => {
  index--;
  if (index < 0) {
    index = cards.length - 1;
    updateCarousel(false);
    setTimeout(() => updateCarousel(), 20);
  } else {
    updateCarousel();
  }
});

// Autoplay
let autoPlay = setInterval(() => nextBtn.click(), 4000);
carousel.addEventListener('mouseenter', () => clearInterval(autoPlay));
carousel.addEventListener('mouseleave', () => {
  autoPlay = setInterval(() => nextBtn.click(), 4000);
});

window.addEventListener('resize', () => {
  updateSizes();
  setupClones();
});

// Init
setupClones();
updateSizes();


// Modal
document.querySelectorAll('.view-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.getElementById('eventModalLabel').innerText = btn.dataset.title;
    document.getElementById('eventModalDesc').innerText = btn.dataset.full;
    document.getElementById('eventModalImage').src = btn.dataset.img;

    const row = document.getElementById('eventModalRowImages');
    row.innerHTML = '';
    JSON.parse(btn.dataset.rowImages).forEach(src => {
      const col = document.createElement('div');
      col.className = "col-md-4 mb-2";
      col.innerHTML = `<img src="${src}" class="img-fluid rounded">`;
      row.appendChild(col);
    });

    new bootstrap.Modal(document.getElementById('eventModal')).show();
  });
});
</script>

</body>
</html>
